author: Ziga Avsec
name: rbp_eclip
version: 0.1
description: RBP binding prediction
extractor:
    type: Dataset
    defined_as: SeqDistDataset
    arguments:
      # TODO - should we use some special file-names?
        # if any of the arguments is numeric, the type specification is mandatory
        intervals_file:
            descr: tsv file with `chrom start end id score strand`
            type: str
        fasta_file:
            descr: Reference genome sequence
        gtf_file:
            descr: file path; Genome annotation GTF file pickled using pandas.
        preproc_transformer:
            descr: path to the serialized tranformer used for pre-processing.
        target_file:
            descr: path to the targets (txt) file
            optional: True # use the same semantics as for the CLI interface?
    output:
        inputs:
            seq:
                type: DNA
                # TODO - sequence length ? - 
                provide_ranges: True
            dist_polya_st:
                shape: (1, 10)
                descr: Distance to poly-a site transformed with B-splines
        targets: binding_site
        metadata:
            # type: dict - redundant
            # TODO - how to deal with the fact that these can be either a number or a vector?
            #   - how can we define special types for the dictionary?
            #      - we would need to allow classes that contain also dictionaries
            #        -> leaf can be an
            #          - array
            #          - scalar
            #          - SpecialType (say ranges, which will
            #                         effectively be a dicitonary of scalars)
            ranges:
                chr:
                    type: str
                start:
                    type: int
                end:
                    type: int
                id:
                    type: str
                strand:
                    type: str


# d: is an alias for description

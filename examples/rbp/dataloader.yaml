type: Dataset
defined_as: dataloader.py::SeqDistDataset
args:
  # TODO - should we use some special file-names?
    # if any of the arguments is numeric, the type specification is mandatory
    intervals_file:
        descr: tsv file with `chrom start end id score strand`
        type: str
    fasta_file:
        descr: Reference genome sequence
        # TODO - flag this as a file...
    gtf_file:
        descr: file path; Genome annotation GTF file pickled using pandas.
    preproc_transformer:
        descr: path to the serialized tranformer used for pre-processing.
    target_file:
        descr: path to the targets (txt) file
        optional: True # use the same semantics as for the CLI interface?
info:
    author: Ziga Avsec
    name: rbp_eclip
    version: 0.1
    descr: RBP binding prediction
dependencies:
    pip:
        # - git+git://github.com/kundajelab/genomelake.git#egg=genomelake
        - concise>=0.6.3
        - pybedtools
        - pysam
output_schema:
    inputs:
        seq:
            shape: (4, 101)
            special_type: DNASeq
            descr: One-hot encoded RNA sequence
            associated_metadata: ranges
        dist_polya_st:
            shape: (1, 10)
            descr: Distance to poly-a site transformed with B-splines
    targets:
        shape: (1, )
        descr: Measured binding strength
    metadata:
        # TODO - update the ranges 
        ranges:
            type: Ranges  # StrandedRanges?
            descr: Ranges describing inputs.seq
            # TODO - define a class for it
postprocessing:
    - type: var_effect_prediction
      args:
          bed_input:
            - intervals_file
# d: is an alias for description
